swagger: "2.0"
info:
  version: "1.5"
  title: "Byzanti.ne API Gateway - Powered by Liberty Block"
# during dev, should point to your local machine
host: dev.byzanti.ne:8901
# basePath prefixes all resource paths
basePath: /
securityDefinitions:
  # X-API-Key: abcdef12345
  APIKeyQueryParam:
    type: apiKey
    in: query
    name: api_key
  APIKeyHeaderParam:
    type: apiKey
    in: header
    name: api_key
  # APIKeyCookieParam:
  #   type: apiKey
  #   in: cookie
  #   name: api_key
schemes:
  # tip: remove http to make production-grade
  - http
  - https
# format of bodies a client can send (Content-Type)
consumes:
  - application/json
# format of the responses to the client (Accepts)
produces:
  - application/json

# Global security (applies to all operations):
security:
  - APIKeyQueryParam: []
  - APIKeyHeaderParam: []
  # - APIKeyCookieParam: []
paths:
  /info:
    # binds a127 app logic to a route
    x-swagger-router-controller: info
    get:
      tags:
        - Base API {account,tokens,transaction,actions}
      description: Returns 'info' of the node to the calling application
      # used as the method name of the controller
      operationId: info
      # parameters:
      #   - name: api_key
      #     in: header
      #     type: string
      #     required: true
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/infoResponse"
        # responses may fall through to errors
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /tokens:
    x-swagger-router-controller: tokens
    get:
      tags:
        - Base API {account,tokens,transaction,actions}
      description: Returns All *legit EOS Derivative Tokens Airdropped, Airgrabbed and ICO'd with an operational contract,symbol
      operationId: tokens
      # parameters:
      # - ({none})
      #  in: query
      #    description: Retrieve a list of all EOS derivative tokens
      #    required: false
      #    type: string
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/tokenResponse"
        # responses may fall through to errors
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /symbols:
    x-swagger-router-controller: dsymbols
    get:
      tags:
        - DEX API {symbols,ticker,orders,trades}
      description: Returns All *legit EOS Derivative Token Pairs for Trading DEX
      operationId: symbols
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/symbolResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /ticker:
    x-swagger-router-controller: dticker
    get:
      tags:
        - DEX API {symbols,ticker,orders,trades}
      description: Returns ticker of all tradable EOS Derivative Token Pairs on DEX
      operationId: ticker
      parameters:
        - in: query
          name: symbol
          required: false
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/tickerResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /orders:
    x-swagger-router-controller: dorders
    get:
      tags:
        - DEX API {symbols,ticker,orders,trades}
      description: Returns order books for a given symbol on DEX
      operationId: orders
      parameters:
        - in: query
          name: symbol
          required: true
          type: string
        - in: query
          name: side
          required: true
          type: string
        - in: query
          name: size
          required: true
          type: integer
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/ordersResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /orderbook:
    x-swagger-router-controller: dorderbook
    get:
      tags:
        - DEX API {symbols,ticker,orders,trades}
      description: Returns order books for a given symbol on DEX
      operationId: orderbook
      parameters:
        - in: query
          name: symbol
          required: true
          type: string
        - in: query
          name: ticksize
          required: false
          type: integer
        - in: query
          name: size
          required: true
          type: integer
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/orderBookResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /tokensByAccount/{account}:
    x-swagger-router-controller: tokensByAccount
    get:
      tags:
        - Base API {account,tokens,transaction,actions}
      description: Returns All EOS and Derivative Tokens Airdropped, Airgrabbed and ICO'd that a user has in his account
      operationId: tokensByAccount
      parameters:
        - name: account
          in: path
          required: true
          type: string
        # Operation-specific security:
        # security:
        #   - APIKeyQueryParam: []
        # ##
        # security:
        #   - APIKeyHeader: []
        ##
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/tokensByAccountResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /transfer:
    x-swagger-router-controller: transfer
    post:
      tags:
        - Transfer API {EOS & Derivative Tokens}
      description: Returns transaction response to transfer on-chain action {from account} {to account} {amount} {memo}
      operationId: transfer
      parameters:
        # - name: api_key
        #   in: query
        #   type: string
        #   description: String api_key
        - name: body
          in: body
          description: Body should encapsulate {from=Account to transfer from}, {to=Account to transfer to}, {amount=amout to transfer such as 1.0000 EOS or 1.0000 IQ},{memo=memo for the transfer which is a string such as 'UUID' or 'deposit into exchange for 78934'}
          required: true
          schema:
            properties:
              from:
                type: string
              to:
                type: string
              amount:
                type: string
              memo:
                type: string
              sig:
                type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
        "401":
          description: Error
          schema:
            $ref: "#/definitions/TransferErrorResponse"
  /transferWithScatter:
    x-swagger-router-controller: transferWithScatter
    post:
      tags:
        - Transfer API {EOS & Derivative Tokens}
      description: Returns transaction response to transfer on-chain action {from account} {to account} {amount} {memo} {sig} {transactionHeaders}
      operationId: transferWithScatter
      parameters:
        - name: body
          in: body
          description: Body should encapsulate {from=Account to transfer from}, {to=Account to transfer to}, {amount=amout to transfer such as 1.0000 EOS or 1.0000 IQ},{memo=memo for the transfer which is a string such as 'UUID' or 'deposit into exchange for 78934'}, {sig=scatter signed arbitrary signature + nonce}, {transactionHeaders}
          required: true
          schema:
            properties:
              from:
                type: string
              to:
                type: string
              amount:
                type: string
              memo:
                type: string
              sig:
                type: string
              transactionHeaders:
                type: object
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
        "401":
          description: Error
          schema:
            $ref: "#/definitions/TransferErrorResponse"
  /transaction/{id}:
    x-swagger-router-controller: getTransaction
    get:
      tags:
        - Base API {account,tokens,transaction,actions}
      description: Returns transaction details of a previously executed on-chain transaction. Used to validate with certainty successfull completion, and or reversed transaction.
      operationId: getTransaction
      parameters:
        - name: id
          in: path
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /getAccount/{account}:
    x-swagger-router-controller: getAccount
    get:
      tags:
        - Base API {account,tokens,transaction,actions}
      description: Returns EOS blockchain account details including avail or staked RAM, CPU.
      operationId: getAccount
      parameters:
        - name: account
          in: path
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /getCurrencyStats:
    x-swagger-router-controller: getCurrencyStats
    get:
      tags:
        - Base API {account,tokens,transaction,actions}
      description: Returns currency stats for a given tokencontract and symbol.
      operationId: getCurrencyStats
      parameters:
        - in: query
          name: contract
          required: true
          type: string
        - in: query
          name: symbol
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /getActions:
    x-swagger-router-controller: getActions
    get:
      tags:
        - Base API {account,tokens,transaction,actions}
      description: Returns actions the given account partook in along with the transaction details. Use pos and offset as a cursor to navigate the items.
      operationId: getActions
      parameters:
        - in: query
          name: account
          required: true
          type: string
        - in: query
          name: pos
          required: false
          type: integer
        - in: query
          name: offset
          required: false
          type: integer
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /getRefunds/{account}:
    x-swagger-router-controller: getRefunds
    get:
      tags:
        - Base API {account,tokens,transaction,actions}
      description: Returns refunds on a given account.
      operationId: getRefunds
      parameters:
        - in: path
          name: account
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /getNameBids/{account}:
    x-swagger-router-controller: getNameBids
    get:
      tags:
        - Base API {account,tokens,transaction,actions}
      description: Returns Name Bids on a given account.
      operationId: getNameBids
      parameters:
        - in: path
          name: account
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /getKeyset:
    x-swagger-router-controller: getKeyset
    get:
      tags:
        - Base API {account,tokens,transaction,actions}
      description: Returns a public/private key pairs. You need 2 pairs for account creation. these are owner keypair and active keypair. Although you can use the same keypair for both owner and active, it is not recommended.
      operationId: getKeyset
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /createAccount:
    x-swagger-router-controller: createAccount
    post:
      tags:
        - Base API {account,tokens,transaction,actions}
      description: Create an EOS Account
      operationId: createAccount
      parameters:
        - name: body
          in: body
          description: Body should encapsulate {creator=EOS account name creating the account}, {name=name of the account being created},{owner=Owner Public key},{active=Active Public key},{sig=account creator signature}
          required: true
          schema:
            properties:
              creator:
                type: string
              name:
                type: string
              owner:
                type: string
              active:
                type: string
              sig:
                type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
        "401":
          description: Error
          schema:
            $ref: "#/definitions/TransferErrorResponse"
  /getProducers:
    x-swagger-router-controller: getProducers
    get:
      tags:
        - Block Producer API {Producer List, Voting, Delegate, Undelegate, Buy/sell RAM & get RAM price}
      description: Returns the list of 21 producers.
      operationId: getProducers
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /voteProducer:
    x-swagger-router-controller: voteProducer
    post:
      tags:
        - Block Producer API {Producer List, Voting, Delegate, Undelegate, Buy/sell RAM & get RAM price}
      description: Lets you vote for a specific producer account
      operationId: voteProducer
      parameters:
        - name: body
          in: body
          description: Body should encapsulate {voter=Account to transfer from}, {producer=comma seperated values of producers to vote for},{sig=voter signature}
          required: true
          schema:
            properties:
              voter:
                type: string
              producer:
                type: string
              sig:
                type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
        "401":
          description: Error
          schema:
            $ref: "#/definitions/TransferErrorResponse"
  /delegate:
    x-swagger-router-controller: delegate
    post:
      tags:
        - Block Producer API {Producer List, Voting, Delegate, Undelegate, Buy/sell RAM & get RAM price}
      description: Delegate specific NET and CPU bandwidth for a user
      operationId: delegate
      parameters:
        - name: body
          in: body
          description: Body should encapsulate {from=account delegating bandwidth}, {receiver=account to delegate bandwidth to},{net=amount of EOS to undelegate for network bandwidth},{cpu=amount of EOS to undelegate for CPU bandwidth},{sig=voter signature}
          required: true
          schema:
            properties:
              from:
                type: string
              receiver:
                type: string
              net:
                type: string
              cpu:
                type: string
              sig:
                type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
        "401":
          description: Error
          schema:
            $ref: "#/definitions/TransferErrorResponse"
  /undelegate:
    x-swagger-router-controller: undelegate
    post:
      tags:
        - Block Producer API {Producer List, Voting, Delegate, Undelegate, Buy/sell RAM & get RAM price}
      description: Undelegate specific NET and CPU bandwidth
      operationId: undelegate
      parameters:
        - name: body
          in: body
          description: Body should encapsulate {from=account undelegating bandwidth}, {receiver=account to undelegate bandwidth from},{net=amount of EOS to undelegate for network bandwidth},{cpu=amount of EOS to undelegate for CPU bandwidth},{sig=voter signature}
          required: true
          schema:
            properties:
              from:
                type: string
              receiver:
                type: string
              net:
                type: string
              cpu:
                type: string
              sig:
                type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
        "401":
          description: Error
          schema:
            $ref: "#/definitions/TransferErrorResponse"
  /getBandwidth/{account}:
    x-swagger-router-controller: getBandwidth
    get:
      tags:
        - Block Producer API {Producer List, Voting, Delegate, Undelegate, Buy/sell RAM & get RAM price}
      description: Returns account bandwidth staked in EOS for network and cpu.
      operationId: getBandwidth
      parameters:
        - name: account
          in: path
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /buyRam:
    x-swagger-router-controller: buyRam
    post:
      tags:
        - Block Producer API {Producer List, Voting, Delegate, Undelegate, Buy/sell RAM & get RAM price}
      description: Buy Ram
      operationId: buyRam
      parameters:
        - name: body
          in: body
          description: Body should encapsulate {payer=account paying for RAM}, {receiver=account receiving RAM},{quant=amount of EOS to pay for RAM},{sig=payer signature}
          required: true
          schema:
            properties:
              payer:
                type: string
              receiver:
                type: string
              quant:
                type: string
              sig:
                type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
        "401":
          description: Error
          schema:
            $ref: "#/definitions/TransferErrorResponse"
  /buyRamBytes:
    x-swagger-router-controller: buyRamBytes
    post:
      tags:
        - Block Producer API {Producer List, Voting, Delegate, Undelegate, Buy/sell RAM & get RAM price}
      description: Buy Ram in specified bytes
      operationId: buyRamBytes
      parameters:
        - name: body
          in: body
          description: Body should encapsulate {payer=account paying for RAM}, {receiver=account receiving RAM},{bytes=RAM in bytes},{sig=payer signature}
          required: true
          schema:
            properties:
              payer:
                type: string
              receiver:
                type: string
              bytes:
                type: integer
              sig:
                type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
        "401":
          description: Error
          schema:
            $ref: "#/definitions/TransferErrorResponse"
  /sellRamBytes:
    x-swagger-router-controller: sellRamBytes
    post:
      tags:
        - Block Producer API {Producer List, Voting, Delegate, Undelegate, Buy/sell RAM & get RAM price}
      description: Sell Ram in specified bytes
      operationId: sellRamBytes
      parameters:
        - name: body
          in: body
          description: Body should encapsulate {account=account selling RAM},{bytes=RAM in bytes},{sig=payer signature}
          required: true
          schema:
            properties:
              account:
                type: string
              bytes:
                type: integer
              sig:
                type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
        "401":
          description: Error
          schema:
            $ref: "#/definitions/TransferErrorResponse"
  /getRamPrice:
    x-swagger-router-controller: getRamPrice
    get:
      tags:
        - Block Producer API {Producer List, Voting, Delegate, Undelegate, Buy/sell RAM & get RAM price}
      description: Returns RAM prices based on supply/quote and the Bancor algorithm
      operationId: getRamPrice
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /swagger:
    x-swagger-pipe: swagger_raw
# complex objects have schema definitions
definitions:
  orderBookResponse:
    properties:
      asks:
        type: array
        items:
          type: object
      bids:
        type: array
        items:
          type: object
  infoResponse:
    properties:
      server_version:
        type: string
      chain_id:
        type: string
      head_block_num:
        type: integer
      last_irreversible_block_num:
        type: integer
      last_irreversible_block_id:
        type: string
      head_block_producer:
        type: string
      virtual_block_cpu_limit:
        type: integer
      virtual_block_net_limit:
        type: integer
      block_cpu_limit:
        type: integer
      block_net_limit:
        type: integer
  ErrorResponse:
    properties:
      error:
        type: string
  TransferErrorResponse:
    properties:
      error:
        type: string
  tokenResponse:
    type: array
    items:
      type: object
      example:
        {
          symbol: IQ,
          contract: everipediaiq,
          precision: 3,
          name: Everipedia,
          hash: 42206a89a3873c8b15bda5178ca0e2da6b223597177bc9abe3980c43c860e3fa,
        }
  symbolResponse:
    type: array
    items:
      type: object
      example:
        {
          tradingpair: iq_eos,
          contract: everipediaiq,
          symbol: IQ,
          price_precision: 5,
          currency_precision: 3,
        }
  tickerResponse:
    type: array
    items:
      type: object
      example:
        {
          symbol: IQ,
          contract: everipediaiq,
          tradingpair: eos_iq,
          last: 0.00178,
          change: 0,
          high: 0.00188,
          low: 0.00173,
          amount: 1210563.5455,
          volume: 2182982.0000,
        }
  ordersResponse:
    type: array
    items:
      type: object
      example:
        {
          source: IQ,
          price: 0.0018647,
          side: BUY,
          chain: EOS,
          assetBuy: IQ,
          assetSell: 0.4294,
          amountBuy: 230.239,
          amountSell: 0.4294,
          expires: 1d,
          type: 2,
          hash: cf583f7ef02852845247953b45f8abce4ea7e134,
          useraccount: randomgooppy,
          filled: 2,
          cancelled: 2,
          new: 2,
          created: 2018-10-17 13:24:21,
          updated: 2018-10-17 14:59:11,
          feediscount: 2,
          timestamp: 1539813551,
        }
  tokensByAccountResponse:
    type: array
    items:
      type: object
      example:
        {
          account: gi3dcnjshege,
          contract: everipediaiq,
          symbol: IQ,
          balance: 824.365,
          precision: 3,
          hash: 42206a89a3873c8b15bda5178ca0e2da6b223597177bc9abe3980c43c860e3fa,
        }
  transferResponse:
    type: object
    items:
      type: object
      example: { object: value }

swagger: "2.0"
info:
  version: "0.0.1"
  title: "Byzanti.ne EOS API Gateway - Powered by LibertyBlock"
# during dev, should point to your local machine
host: api.byzanti.ne:8902
# basePath prefixes all resource paths 
basePath: /
# 
schemes:
  # tip: remove http to make production-grade
  - http
  - https
# format of bodies a client can send (Content-Type)
consumes:
  - application/json
# format of the responses to the client (Accepts)
produces:
  - application/json
paths:
  /info:
    # binds a127 app logic to a route
    x-swagger-router-controller: info
    get:
      tags:
        - On-chain Read API Collection
      description: Returns 'info' of the node to the calling application
      # used as the method name of the controller
      operationId: info
     # parameters:
      # - name: name
      #  in: query
      #    description: get EOS Node info
      #    required: false
      #    type: string
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/infoResponse"
        # responses may fall through to errors
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /tokens:
    x-swagger-router-controller: tokens
    get:
      tags:
        - On-chain Read API Collection
      description: Returns All *legit EOS Derivative Tokens Airdropped, Airgrabbed and ICO'd with an operational contract,symbol
      operationId: tokens
     # parameters:
      # - ({none})
      #  in: query
      #    description: Retrieve a list of all EOS derivative tokens
      #    required: false
      #    type: string
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/tokenResponse"
        # responses may fall through to errors
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /tokensByAccount/{account}:
    x-swagger-router-controller: tokensByAccount
    get:
      tags:
        - On-chain Read API Collection
      description: Returns All EOS and Derivative Tokens Airdropped, Airgrabbed and ICO'd that a user has in his account 
      operationId: tokensByAccount
      parameters:
      - name: account
        in: path
        required: true
        type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/tokensByAccountResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /transfer:
    x-swagger-router-controller: transfer
    post:
      tags:
        - On-chain Write API Collection
      description: Returns transaction response to transfer on-chain action {from account} {to account} {amount} {memo} 
      operationId: transfer
      parameters:
        - name: body
          in: body
          description: Body should encapsulate {from=Account to transfer from}, {to=Account to transfer to}, {amount=amout to transfer such as 1.0000 EOS or 1.0000 IQ},{memo=memo for the transfer which is a string such as 'UUID' or 'deposit into exchange for 78934'}
          required: true
          schema:
            properties:
              from:
                type: string
              to:
                type: string
              amount:
                type: string
              memo:
                type: string
              sig:
                type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
        "401":
          description: Error
          schema:
            $ref: "#/definitions/TransferErrorResponse"
  /transaction/{id}:
    x-swagger-router-controller: getTransaction
    get:
      tags:
        - On-chain Read API Collection
      description: Returns transaction details of a previously executed on-chain transaction. Used to validate with certainty successfull completion, and or reversed transaction.
      operationId: getTransaction
      parameters:
      - name: id
        in: path
        required: true
        type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /getAccount/{account}:
    x-swagger-router-controller: getAccount
    get:
      tags:
        - On-chain Read API Collection
      description: Returns EOS blockchain account details including avail or staked RAM, CPU.
      operationId: getAccount
      parameters:
      - name: account
        in: path
        required: true
        type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /getActions:
    x-swagger-router-controller: getActions
    get:
      tags:
        - On-chain Read API Collection
      description: Returns actions the given account partook in along with the transaction details. Use pos and offset as a cursor to navigate the items.
      operationId: getActions
      parameters:
        - in: query
          name: account
          required: true
          type: string
        - in: query
          name: pos
          required: false
          type: integer
        - in: query
          name: offset
          required: false
          type: integer
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/transferResponse"
        "400":
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /swagger:
    x-swagger-pipe: swagger_raw
# complex objects have schema definitions
definitions:
  infoResponse:
      properties:
        server_version:
          type: string
        chain_id:
          type: string
        head_block_num:
          type: integer
        last_irreversible_block_num:
          type: integer
        last_irreversible_block_id:
          type: string
        head_block_producer:
          type: string
        virtual_block_cpu_limit:
          type: integer
        virtual_block_net_limit:
          type: integer
        block_cpu_limit:
          type: integer
        block_net_limit:
          type: integer
  ErrorResponse:
    properties:
      error:
        type: string
  TransferErrorResponse:
    properties:
      error:
        type: string
  tokenResponse:
    type: array
    items:
      type: object
      example: {name: Everipedia, contract: everipediaiq,symbol: IQ}
  tokensByAccountResponse:
    type: array
    items:
      type: object
      example: {account: gi3dcnjshege, contract: everipediaiq,symbol: IQ, balance: '5223.0000'}
  transferResponse:
    type: object
    items:
      type: object
      example: {object: value}